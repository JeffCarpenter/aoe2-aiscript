[Trace - 5:20:42 PM] Sending request 'initialize - (0)'.
Params: {
    "processId": 13560,
    "rootPath": "c:\\Program Files (x86)\\Microsoft Games\\Age of Empires II\\AI",
    "rootUri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI",
    "capabilities": {
        "workspace": {
            "applyEdit": true,
            "didChangeConfiguration": {
                "dynamicRegistration": true
            },
            "didChangeWatchedFiles": {
                "dynamicRegistration": true
            },
            "symbol": {
                "dynamicRegistration": true
            },
            "executeCommand": {
                "dynamicRegistration": true
            }
        },
        "textDocument": {
            "synchronization": {
                "dynamicRegistration": true,
                "willSave": true,
                "willSaveWaitUntil": true,
                "didSave": true
            },
            "completion": {
                "dynamicRegistration": true,
                "completionItem": {
                    "snippetSupport": true,
                    "commitCharactersSupport": true
                }
            },
            "hover": {
                "dynamicRegistration": true
            },
            "signatureHelp": {
                "dynamicRegistration": true
            },
            "definition": {
                "dynamicRegistration": true
            },
            "references": {
                "dynamicRegistration": true
            },
            "documentHighlight": {
                "dynamicRegistration": true
            },
            "documentSymbol": {
                "dynamicRegistration": true
            },
            "codeAction": {
                "dynamicRegistration": true
            },
            "codeLens": {
                "dynamicRegistration": true
            },
            "formatting": {
                "dynamicRegistration": true
            },
            "rangeFormatting": {
                "dynamicRegistration": true
            },
            "onTypeFormatting": {
                "dynamicRegistration": true
            },
            "rename": {
                "dynamicRegistration": true
            },
            "documentLink": {
                "dynamicRegistration": true
            }
        }
    },
    "trace": "verbose"
}


Debugger listening on ws://127.0.0.1:6009/aa95dcf4-915b-4652-b216-95e56a530ee1
For help see https://nodejs.org/en/docs/inspector
[Trace - 5:20:42 PM] Received response 'initialize - (0)' in 191ms.
Result: {
    "capabilities": {
        "textDocumentSync": 1,
        "completionProvider": {
            "resolveProvider": true
        }
    }
}


[Trace - 5:20:42 PM] Sending notification 'initialized'.
Params: {}


[Trace - 5:20:42 PM] Sending notification 'textDocument/didOpen'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "languageId": "aoe2ai",
        "version": 1,
        "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
    }
}


[Trace - 5:20:42 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": []
}


Debugger attached.
[Trace - 5:21:36 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 2
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:36 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": []
}


[Trace - 5:21:37 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 3
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n((defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:37 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": []
}


[Trace - 5:21:39 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 4
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n    (defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:39 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        }
    ]
}


[Trace - 5:21:40 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 5
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:40 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        }
    ]
}


[Trace - 5:21:42 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 6
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n    \r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:42 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        }
    ]
}


[Trace - 5:21:44 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 7
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n\r\n    \r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:44 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        }
    ]
}


[Trace - 5:21:45 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 8
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:45 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        }
    ]
}


[Trace - 5:21:46 PM] Sending notification 'textDocument/didChange'.
Params: {
    "textDocument": {
        "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
        "version": 9
    },
    "contentChanges": [
        {
            "text": "; Name: Great Leader\r\n; Constants\r\n(defconst preferred-wall-type 2)\r\n(defconst loom-population 7)\r\n(defconst dark-age-farm-limit 5)\r\n; Research (ACTIVITY)\r\n(defrule\r\n(can-research ri-loom)\r\n(population >= loom-population)\r\n=>\r\n(research ri-loom)\r\n(disable-self)\r\n)\r\n(defrule\r\n(can-research feudal-age)\r\n(research-completed ri-loom)\r\n(building-type-count-total farm >= 1)\r\n=>\r\n(research feudal-age)\r\n(disable-self)\r\n)\r\n(\r\n\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-man-at-arms)\r\n(building-type-count-total barracks >= 1)\r\n=>\r\n(research ri-man-at-arms)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-wheel-barrow)\r\n=>\r\n(research ri-wheel-barrow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-town-watch)\r\n(research-completed ri-man-at-arms)\r\n=>\r\n(research ri-town-watch)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-tracking)\r\n=>\r\n(research ri-tracking)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-husbandry)\r\n=>\r\n(research ri-husbandry)\r\n(disable-self)\r\n)\r\n; Blacksmith stuff\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-fletching)\r\n=>\r\n(research ri-fletching)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-forging)\r\n=>\r\n(research ri-forging)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-padded-archer-armor)\r\n=>\r\n(research ri-padded-archer-armor)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-barding)\r\n=>\r\n(research ri-scale-barding)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-scale-mail)\r\n=>\r\n(research ri-scale-mail)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-double-bit-axe)\r\n=>\r\n(research ri-double-bit-axe)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(research-available castle-age)\r\n=>\r\n(set-escrow-percentage food 35)\r\n(set-escrow-percentage gold 35)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(research-available imperial-age)\r\n=>\r\n(set-escrow-percentage food 45)\r\n(set-escrow-percentage gold 45)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(building-type-count-total blacksmith >= 1)\r\n(building-type-count-total stable >= 1)\r\n(building-type-count-total archery-range >= 1)\r\n(research-completed ri-town-watch)\r\n(can-research-with-escrow castle-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total market >= 1)\r\n(building-type-count-total castle >= 1)\r\n(building-type-count-total siege-workshop >= 1)\r\n(building-type-count-total university >= 1)\r\n(building-type-count-total monastery >= 1)\r\n(research-completed ri-town-patrol)\r\n(can-research-with-escrow imperial-age)\r\n=>\r\n(release-escrow food)\r\n(release-escrow gold)\r\n(set-escrow-percentage food 0)\r\n(set-escrow-percentage gold 0)\r\n(research imperial-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(research-completed ri-town-watch)\r\n=>\r\n(research castle-age)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-stone-mining)\r\n=>\r\n(research ri-stone-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-gold-mining)\r\n=>\r\n(research ri-gold-mining)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(can-research ri-horse-collar)\r\n=>\r\n(research ri-horse-collar)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-crossbow)\r\n=>\r\n(research ri-crossbow)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-guard-tower)\r\n=>\r\n(research ri-guard-tower)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-war-galley)\r\n=>\r\n(research ri-war-galley)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-galleon)\r\n=>\r\n(research ri-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-arbalest)\r\n=>\r\n(research ri-arbalest)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-long-swordsman)\r\n=>\r\n(research ri-long-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-two-handed-swordsman)\r\n=>\r\n(research ri-two-handed-swordsman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-light-cavalry)\r\n=>\r\n(research ri-light-cavalry)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-bow-saw)\r\n=>\r\n(research ri-bow-saw)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-hand-cart)\r\n=>\r\n(research ri-hand-cart)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-squires)\r\n=>\r\n(research ri-squires)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-pikeman)\r\n=>\r\n(research ri-pikeman)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-ballistics)\r\n=>\r\n(research ri-ballistics)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(can-research ri-town-patrol)\r\n=>\r\n(research ri-town-patrol)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-onager)\r\n=>\r\n(research ri-onager)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-chemistry)\r\n=>\r\n(research ri-chemistry)\r\n(disable-self)\r\n)\r\n(defrule \r\n(current-age == imperial-age)\r\n(can-research ri-cannon-galleon)\r\n=>\r\n(research ri-cannon-galleon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-capped-ram)\r\n=>\r\n(research ri-capped-ram)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-bombard-cannon)\r\n=>\r\n(research ri-bombard-cannon)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-cavalier)\r\n=>\r\n(research ri-cavalier)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-paladin)\r\n=>\r\n(research ri-paladin)\r\n(disable-self)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(can-research ri-champion)\r\n=>\r\n(research ri-champion)\r\n(disable-self)\r\n)\r\n;== STRATEGIC NUMBERS ==\r\n(defrule\r\n(true)\r\n=>\r\n(set-strategic-number sn-percent-civilian-gatherers 66)\r\n(set-strategic-number sn-percent-civilian-explorers 0)\r\n(set-strategic-number sn-percent-civilian-builders 34)\r\n(set-strategic-number sn-maximum-explore-group-size 1)\r\n(set-strategic-number sn-number-explore-groups 1)\r\n(disable-self)\r\n)\r\n\r\n(defrule\r\n    (current-age == dark-age)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 25)\r\n    (set-strategic-number sn-gold-gatherer-percentage 12)\r\n    (set-strategic-number sn-stone-gatherer-percentage 13)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (research-completed ri-crossbow)\r\n    (research-completed ri-long-swordsman)\r\n    (research-completed ri-light-cavalry)\r\n    (research-completed ri-hand-cart)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 25)\r\n    (set-strategic-number sn-wood-gatherer-percentage 50)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total siege-workshop >= 1)\r\n    (building-type-count-total castle >= 1)\r\n    (building-type-count-total university >= 1)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 13)\r\n    (set-strategic-number sn-gold-gatherer-percentage 25)\r\n    (set-strategic-number sn-stone-gatherer-percentage 12)\r\n    (disable-self)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total siege-workshop > 0)\r\n=>\r\n    (set-strategic-number sn-food-gatherer-percentage 50)\r\n    (set-strategic-number sn-wood-gatherer-percentage 15)\r\n    (set-strategic-number sn-gold-gatherer-percentage 35)\r\n    (set-strategic-number sn-stone-gatherer-percentage 0)\r\n    (disable-self)\r\n)\r\n;== COMBAT (ACTIVITY) ==\r\n(defrule\r\n(current-age == feudal-age)\r\n;Other conditions if you want\r\n=>\r\n(enable-wall-placement 2)\r\n(disable-self)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (military-population >= 10)\r\n    =>\r\n    (attack-now)\r\n)\r\n;== BUILDING (ACTIVITY) ==\r\n(defrule\r\n(can-build-wall preferred-wall-type stone-wall-line)\r\n=>\r\n(build-wall preferred-wall-type stone-wall-line)\r\n)\r\n(defrule\r\n(building-type-count-total stone-wall-line > 0)\r\n(can-build-gate 2)\r\n(building-type-count-total gate < 5)\r\n=>\r\n(build-gate 2)\r\n)\r\n(defrule \r\n    (can-build house)\r\n    (housing-headroom < 4)\r\n    (population-headroom > 3)\r\n    =>\r\n    (build house)\r\n)\r\n(defrule \r\n    (current-age == dark-age)\r\n    (can-build dock)\r\n    (building-type-count-total dock < 1)\r\n    =>\r\n    (build dock)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (building-type-count-total barracks < 1)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 1)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build university)\r\n    (building-type-count-total university < 3)\r\n    =>\r\n    (build university)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build market)\r\n    (building-type-count-total market < 1)\r\n    =>\r\n    (build market)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build blacksmith)\r\n    (building-type-count-total blacksmith < 1)\r\n    =>\r\n    (build blacksmith)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build barracks)\r\n    (research-completed ri-man-at-arms)\r\n    (building-type-count-total barracks < 2)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build barracks)\r\n    (research-completed ri-long-swordsman)\r\n    (building-type-count-total barracks < 5)\r\n    =>\r\n    (build barracks)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 1)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == feudal-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 1)\r\n    =>\r\n    (build archery-range)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 2)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 2)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build castle)\r\n    (building-type-count-total castle < 1)\r\n    =>\r\n    (build castle)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build monastery)\r\n    (building-type-count-total monastery < 1)\r\n    =>\r\n    (build monastery)\r\n)\r\n(defrule \r\n    (current-age == castle-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 1)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build siege-workshop)\r\n    (building-type-count-total siege-workshop < 5)\r\n    =>\r\n    (build siege-workshop)\r\n)\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build archery-range)\r\n    (building-type-count-total archery-range < 4)\r\n    =>\r\n    (build archery-range)\r\n)\r\n\r\n(defrule \r\n    (current-age == imperial-age)\r\n    (can-build stable)\r\n    (building-type-count-total stable < 4)\r\n    =>\r\n    (build stable)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mill == 0)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mill < 2)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mill < 5)\r\n    (resource-found food)\r\n    (can-build mill)\r\n=>\r\n    (build mill)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total lumber-camp == 0)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total lumber-camp < 2)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total lumber-camp < 4)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total lumber-camp < 8)\r\n    (resource-found wood)\r\n    (can-build lumber-camp)\r\n=>\r\n    (build lumber-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 5)\r\n    (resource-found stone)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total watch-tower-line <= 2)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total watch-tower-line <= 5)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total watch-tower-line <= 10)\r\n    (can-build watch-tower-line)\r\n=>\r\n    (build watch-tower-line)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (building-type-count-total mining-camp <= 2)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total mining-camp <= 3)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total mining-camp <= 4)\r\n    (resource-found gold)\r\n    (can-build mining-camp)\r\n=>\r\n    (build mining-camp)\r\n)\r\n(defrule\r\n    (current-age == dark-age)\r\n    (unit-type-count-total villager >= 9)\r\n    (building-type-count-total farm < 5)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == feudal-age)\r\n    (building-type-count-total farm < 10)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == castle-age)\r\n    (building-type-count-total farm < 15)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n(defrule\r\n    (current-age == imperial-age)\r\n    (building-type-count-total farm < 20)\r\n    (idle-farm-count < 4)\r\n    (can-build farm)\r\n=>\r\n    (build farm)\r\n)\r\n;== TRAINING (ACTIVITY) ==\r\n(defrule\r\n(current-age == dark-age)\r\n    (unit-type-count-total villager < 30)\r\n    (can-train villager)\r\n=>\r\n    (train villager)\r\n)\r\n(defrule\r\n(current-age == dark-age)\r\n(unit-type-count-total fishing-ship < 2)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total villager < 45)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n    (building-type-count-total archery-range > 1)\r\n    (unit-type-count-total fishing-ship < 5)\r\n    (can-train fishing-ship)\r\n=>\r\n    (train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total trade-cog < 1)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(unit-type-count-total galley-line < 2)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total villager < 60)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total fishing-ship < 10)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total galley-line < 5)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cog < 2)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total villager < 120)\r\n(can-train villager)\r\n=>\r\n(train villager)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total galley-line < 10)\r\n(can-train galley-line)\r\n=>\r\n(train galley-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cog < 5)\r\n(can-train trade-cog)\r\n=>\r\n(train trade-cog)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total fishing-ship < 15)\r\n(can-train fishing-ship)\r\n=>\r\n(train fishing-ship)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(unit-type-count-total trade-cart < 5)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(unit-type-count-total trade-cart < 10)\r\n(can-train trade-cart)\r\n=>\r\n(train trade-cart)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(research-completed ri-man-at-arms)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 3)\r\n(unit-type-count-total militiaman-line < 10)\r\n(can-train militiaman-line)\r\n=>\r\n(train militiaman-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total stable >= 1)\r\n(unit-type-count-total scout-cavalry-line < 10)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 20)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 10)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total scout-cavalry-line < 30)\r\n(can-train scout-cavalry-line)\r\n=>\r\n(train scout-cavalry-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total stable >= 2)\r\n(unit-type-count-total knight-line < 20)\r\n(can-train knight-line)\r\n=>\r\n(train knight-line)\r\n)\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total archer-line < 10)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 10)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 20)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 1)\r\n(unit-type-count-total  cavalry-archer-line < 20)\r\n(can-train cavalry-archer-line)\r\n=>\r\n(train cavalry-archer-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total archery-range >= 2)\r\n(unit-type-count-total archer-line < 30)\r\n(can-train archer-line)\r\n=>\r\n(train archer-line)\r\n)\r\n\r\n(defrule\r\n(current-age == feudal-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 5)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 10)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 10)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 10)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 10)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total scorpion-line < 20)\r\n(can-train scorpion-line)\r\n=>\r\n(train scorpion-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total mangonel-line < 20)\r\n(can-train mangonel-line)\r\n=>\r\n(train mangonel-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total battering-ram-line < 20)\r\n(can-train battering-ram-line)\r\n=>\r\n(train battering-ram-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total barracks >= 1)\r\n(unit-type-count-total spearman-line < 20)\r\n(can-train spearman-line)\r\n=>\r\n(train spearman-line)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total siege-workshop >= 1)\r\n(unit-type-count-total bombard-cannon < 10)\r\n(can-train bombard-cannon)\r\n=>\r\n(train bombard-cannon)\r\n)\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total castle >= 1)\r\n(unit-type-count-total my-unique-unit-line < 10)\r\n(can-train my-unique-unit-line)\r\n=>\r\n(train my-unique-unit-line)\r\n)\r\n; Monks\r\n(defrule\r\n(current-age == castle-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 5)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n(defrule\r\n(current-age == imperial-age)\r\n(building-type-count-total monastery >= 1)\r\n(unit-type-count-total monk < 10)\r\n(can-train monk)\r\n=>\r\n(train monk)\r\n)\r\n\r\n\r\n"
        }
    ]
}


[Trace - 5:21:46 PM] Received notification 'textDocument/publishDiagnostics'.
Params: {
    "uri": "file:///c%3A/Program%20Files%20%28x86%29/Microsoft%20Games/Age%20of%20Empires%20II/AI/Great%20Leader.per",
    "diagnostics": [
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2011",
            "message": "Missing closing parenthesis",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 21,
                    "character": 0
                },
                "end": {
                    "line": 21,
                    "character": 0
                }
            },
            "code": "ERR2002",
            "message": "Missing keyword",
            "source": "aoe2ai linter"
        },
        {
            "severity": 1,
            "range": {
                "start": {
                    "line": 23,
                    "character": 0
                },
                "end": {
                    "line": 23,
                    "character": 0
                }
            },
            "code": "ERR2001",
            "message": "Missing opening parenthesis",
            "source": "aoe2ai linter"
        }
    ]
}


